coder:
  image:
    tag: latest

provisionerd:
  replicaCount: 3
  env:
    - name: TEST
      value: "test"
  image:
    repo: codercom/provisionerd
    tag: latest
    pullPolicy: Always
    pullSecrets:
      - name: hi
  initContainers:
    - name: init-container
      image: busybox:1.28
      command: ['sh', '-c', 'sleep 2']
  annotations:
    annotation-test-1: "annotation-test-1 value"
    annotation-test-2: "annotation-test-2 value"
  labels:
    label-test-1: "label-test-1 value"
    label-test-2: "label-test-2 value"
  podAnnotations:
    pod-annotation-test-1: "pod-annotation-test-1 value"
    pod-annotation-test-2: "pod-annotation-test-2 value"
  podLabels:
    pod-label-test-1: "pod-label-test-1 value"
    pod-label-test-2: "pod-label-test-2 value"
  serviceAccount:
    workspacePerms: false
    enableDeployments: true
    annotations:
      service-account-annotation-test-1: "service-account-annotation-test-1 value"
      service-account-annotation-test-2: "service-account-annotation-test-2 value"
    name: "coder-provisioner-custom-name"
  securityContext:
    runAsNonRoot: false
    runAsUser: 1001
    runAsGroup: 1001
    readOnlyRootFilesystem: true
    seccompProfile:
      type: "CoolProfile"
    allowPrivilegeEscalation: true
  volumes:
    - name: "coder-provisioner-volume"
      emptyDir: {}
  volumeMounts:
    - name: "coder-provisioner-volume"
      mountPath: "/coder-provisioner-volume"
  lifecycle:
    postStart:
      exec:
        command: ["/bin/sh", "-c", "echo postStart"]
    preStop:
      exec:
        command: ["/bin/sh","-c","echo preStart"]
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 128Mi
  certs:
    secrets:
      - name: "my-ca-bundle"
        key: "ca-bundle.crt"
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
                - key: app.kubernetes.io/instance
                  operator: In
                  values:
                    - "coder-provisionerd-custom"
            topologyKey: kubernetes.io/hostname
          weight: 1
  tolerations:
    - key: "key"
      operator: "Equal"
      value: "value"
      effect: "NoSchedule"
  nodeSelector:
    key: "value"
  command:
    - /opt/coder2
